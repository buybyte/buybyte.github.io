<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>keep doing – Network</title><link>https://cloudedseal.github.io/tags/network/</link><description>Recent content in Network on keep doing</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 11 Sep 2021 16:21:12 +0800</lastBuildDate><atom:link href="https://cloudedseal.github.io/tags/network/index.xml" rel="self" type="application/rss+xml"/><item><title>What-happens-type-url-into-browser-and-press-enter</title><link>https://cloudedseal.github.io/blog/what-happens-type-url-into-browser-and-press-enter/</link><pubDate>Sat, 11 Sep 2021 16:21:12 +0800</pubDate><guid>https://cloudedseal.github.io/blog/what-happens-type-url-into-browser-and-press-enter/</guid><description>
&lt;h2>dns query&lt;span class="hx-absolute -hx-mt-20" id="dns-query">&lt;/span>
&lt;a href="#dns-query" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>get the ip of the target domain&lt;/p>
&lt;h3>browser cache&lt;span class="hx-absolute -hx-mt-20" id="browser-cache">&lt;/span>
&lt;a href="#browser-cache" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>firefox(about:networking#dns)
&lt;img src="https://raw.githubusercontent.com/buybyte/pictures/main/img/firefox_dns_cache.png" alt="firefox_dns_cache" loading="lazy" />&lt;/p>
&lt;h3>/etc/hosts&lt;span class="hx-absolute -hx-mt-20" id="etchosts">&lt;/span>
&lt;a href="#etchosts" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h3>os cache&lt;span class="hx-absolute -hx-mt-20" id="os-cache">&lt;/span>
&lt;a href="#os-cache" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;ol>
&lt;li>macos 查看 dns 请求日志 sudo log stream &amp;ndash;predicate &amp;lsquo;process == &amp;ldquo;mDNSResponder&amp;rdquo;&amp;rsquo; &amp;ndash;info&lt;/li>
&lt;/ol>
&lt;h3>dns resolver&lt;span class="hx-absolute -hx-mt-20" id="dns-resolver">&lt;/span>
&lt;a href="#dns-resolver" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>/etc/resolv.conf&lt;/p>
&lt;ol>
&lt;li>arp -a 查看有没有 dns 服务器的 mac 地址&lt;/li>
&lt;li>ARP request for the nameserver&lt;/li>
&lt;li>send dns query to get the ip of the domain&lt;/li>
&lt;/ol>
&lt;h2>arp 获取 gateway 的 mac 地址&lt;span class="hx-absolute -hx-mt-20" id="arp-获取-gateway-的-mac-地址">&lt;/span>
&lt;a href="#arp-%e8%8e%b7%e5%8f%96-gateway-%e7%9a%84-mac-%e5%9c%b0%e5%9d%80" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h2>向 gateway 发送 ip packet&lt;span class="hx-absolute -hx-mt-20" id="向-gateway-发送-ip-packet">&lt;/span>
&lt;a href="#%e5%90%91-gateway-%e5%8f%91%e9%80%81-ip-packet" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h2>References&lt;span class="hx-absolute -hx-mt-20" id="references">&lt;/span>
&lt;a href="#references" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ol>
&lt;li>&lt;a href="http://www.science.smith.edu/~nhowe/262/oldlabs/keyboard.html" target="_blank" rel="noopener">keyborad-interrput&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.zhihu.com/question/560616439/answer/2722866208" target="_blank" rel="noopener">Chrome 是怎么判断地址栏输入的东西是不是网址? 这就是第一步😂-omnibox&lt;/a>&lt;/li>
&lt;li>&lt;a href="about:networking#dns" >firefox dns&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.fortinet.com/resources/cyberglossary/what-is-arp" target="_blank" rel="noopener">ARP&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>network-dhcp</title><link>https://cloudedseal.github.io/blog/network-dhcp/</link><pubDate>Sat, 09 May 2020 09:36:27 +0800</pubDate><guid>https://cloudedseal.github.io/blog/network-dhcp/</guid><description>
&lt;h2>DHCP 步骤&lt;span class="hx-absolute -hx-mt-20" id="dhcp-步骤">&lt;/span>
&lt;a href="#dhcp-%e6%ad%a5%e9%aa%a4" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>Discover&lt;span class="hx-absolute -hx-mt-20" id="discover">&lt;/span>
&lt;a href="#discover" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h3>Offer&lt;span class="hx-absolute -hx-mt-20" id="offer">&lt;/span>
&lt;a href="#offer" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h3>Request&lt;span class="hx-absolute -hx-mt-20" id="request">&lt;/span>
&lt;a href="#request" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h3>ACK&lt;span class="hx-absolute -hx-mt-20" id="ack">&lt;/span>
&lt;a href="#ack" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h2>References&lt;span class="hx-absolute -hx-mt-20" id="references">&lt;/span>
&lt;a href="#references" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ol>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/vU14pBhHTC-oVp1gBpmSvA" target="_blank" rel="noopener">127.0.0.1 和 0.0.0.0&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://support.microsoft.com/en-gb/help/169289/" target="_blank" rel="noopener">DHCP-Basics&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://medium.com/@bromiley/full-packet-friday-dhcp-abbc6b7b3c77" target="_blank" rel="noopener">full-packet-friday-dhcp&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.geeksforgeeks.org/dynamic-host-configuration-protocol-dhcp/" target="_blank" rel="noopener">dynamic-host-configuration-protocal&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tools.ietf.org/html/rfc1541" target="_blank" rel="noopener">dhcp-rfc&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>network-dns</title><link>https://cloudedseal.github.io/blog/network-dns/</link><pubDate>Thu, 23 Apr 2020 10:27:04 +0800</pubDate><guid>https://cloudedseal.github.io/blog/network-dns/</guid><description>
&lt;blockquote>
&lt;p>怎样学习一个新的东西，也可以按照一定的套路的。这个东西解决什么问题？这个东西怎样解决问题？
还有没有其他方法？&lt;/p>
&lt;/blockquote>
&lt;h2>三步走分析一下 DNS&lt;span class="hx-absolute -hx-mt-20" id="三步走分析一下-dns">&lt;/span>
&lt;a href="#%e4%b8%89%e6%ad%a5%e8%b5%b0%e5%88%86%e6%9e%90%e4%b8%80%e4%b8%8b-dns" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>解决什么问题&lt;span class="hx-absolute -hx-mt-20" id="解决什么问题">&lt;/span>
&lt;a href="#%e8%a7%a3%e5%86%b3%e4%bb%80%e4%b9%88%e9%97%ae%e9%a2%98" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>根据域名找到 IP。为啥要找到域名对应的 IP 呢？答案很简单，因为 &lt;code>TCP/IP&lt;/code> 协议栈需要。
很常见的一个问题就是浏览器得到一个 web page 的流程是啥样的。&lt;/p>
&lt;h3>什么方式解决问题&lt;span class="hx-absolute -hx-mt-20" id="什么方式解决问题">&lt;/span>
&lt;a href="#%e4%bb%80%e4%b9%88%e6%96%b9%e5%bc%8f%e8%a7%a3%e5%86%b3%e9%97%ae%e9%a2%98" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>怎样组织&lt;code>域名(domain name)&lt;/code>？这是域名系统的首要问题。底层的组织架构，决定了域名解析的流程。有点经济基础决定上层建筑的意思。域名少的时候可以直接放在一个文件里。对，这个文件在类 unix 系统里就是 &lt;code>/etc/hosts&lt;/code> 的文件。但是域名超级多怎么办？分类、组成层次结构。就像 Linux 的文件系统的组织方式一样。组织成一个树状结构。DNS 的查询问题，那就可以视为树的遍历问题。&lt;/p>
&lt;h4>top level domain&lt;span class="hx-absolute -hx-mt-20" id="top-level-domain">&lt;/span>
&lt;a href="#top-level-domain" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>&lt;code>com&lt;/code>、&lt;code>org&lt;/code>、 &lt;code>cn&lt;/code> 等等就是所谓的&lt;a href="http://data.iana.org/TLD/tlds-alpha-by-domain.txt" target="_blank" rel="noopener">顶级域名&lt;/a>。也就是一级域名。那么问题就来了，这些顶级域名存放在哪呢？存放到 &lt;a href="https://www.cloudflare.com/learning/dns/glossary/dns-root-server/" target="_blank" rel="noopener">root server&lt;/a>。换一种理解方法就是，这些 root server 就是顶级域名的 metadata。这些 &lt;a href="https://www.iana.org/domains/root/servers" target="_blank" rel="noopener">root server IP&lt;/a> 是固定的。实现 DNS 这个功能的软件内置这些 root server 的 ip。这一点很重要。&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">rpm -ql &lt;span class="nb">bind&lt;/span> &lt;span class="p">|&lt;/span> grep named.ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/share/doc/bind-9.11.4/sample/var/named/named.ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/var/named/named.ca&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;blockquote>
&lt;p>centos 上安装 &lt;code>bind9&lt;/code> 这个文件包含所有的 root servers 的 ip&lt;/p>
&lt;/blockquote>
&lt;h4>second level domain&lt;span class="hx-absolute -hx-mt-20" id="second-level-domain">&lt;/span>
&lt;a href="#second-level-domain" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>以 &lt;code>www.google.com.&lt;/code> 为例 &lt;code>google&lt;/code> 就是二级域名。其他的依此类推。&lt;/p>
&lt;h4>DNS 层级树&lt;span class="hx-absolute -hx-mt-20" id="dns-层级树">&lt;/span>
&lt;a href="#dns-%e5%b1%82%e7%ba%a7%e6%a0%91" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/dns-hierarchy.svg" alt="DNS 层级树" loading="lazy" />&lt;/p>
&lt;blockquote>
&lt;p>可以看到整个 DNS 的入口就是 root。也就是记录顶级域名在哪些服务器上的信息。这是 &lt;code>root&lt;/code> 也就是不需要解析这些记录顶级域名的服务器。直接固定了这些 &lt;a href="https://www.iana.org/domains/root/servers" target="_blank" rel="noopener">root server 的 IP&lt;/a> 地址。实现 DNS 功能的软件，直接内置这些固定的 IP。DNS 查询第一步就是向这些 root server 查询顶级域名对应哪些 nameserver，也就是顶级域名对应的 IP。其实 DNS也就是个分布式层级数据库。注册域名也就是向数据库添加一条记录。但是不是免费注册的。&lt;/p>
&lt;/blockquote>
&lt;h4>DNS Zone&lt;span class="hx-absolute -hx-mt-20" id="dns-zone">&lt;/span>
&lt;a href="#dns-zone" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/dns-zone.svg" alt="DNS Zone" loading="lazy" />&lt;/p>
&lt;blockquote>
&lt;p>可以看到整个 DNS 层级树，每一个节点对应一个 Zone。&lt;/p>
&lt;/blockquote>
&lt;h4>uncached DNS lookup&lt;span class="hx-absolute -hx-mt-20" id="uncached-dns-lookup">&lt;/span>
&lt;a href="#uncached-dns-lookup" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/network-dns.svg" alt="dns-look-up" loading="lazy" />&lt;/p>
&lt;blockquote>
&lt;p>图中 &lt;code>OS stub resovler&lt;/code> 就是负责 DNS 解析的进程，发起 DNS 递归查询请求。
&lt;code>local dns server&lt;/code> 发起迭代查询，查询域名对应的 IP。之后返给 &lt;code>OS stub resovler&lt;/code>(name servers that provide the complete answers to user queries)。&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>这个进程向 &lt;code>local dns server&lt;/code> 发起递归查询。也就是只需要等 &lt;code>local dns server&lt;/code> 查询结果就行。&lt;/li>
&lt;li>&lt;code>local dns server&lt;/code> 发起迭代查询。因为 &lt;code>local dns server&lt;/code> 有所有 root server 的 IP，选择一个 IP，根据顶级域名属于哪一个 &lt;code>TLD Zone&lt;/code>， 发起迭代查询。&lt;/li>
&lt;li>可以查询得到记录这个顶级域名的 TLD server 有哪些，以及这些服务器的 IP。&lt;/li>
&lt;li>&lt;code>local dns server&lt;/code> 选择一个 TLD server，发起迭代查询。&lt;/li>
&lt;li>得到这个域名的权威服务器。&lt;/li>
&lt;li>选择一个权威服务器，发起迭代查询，查询域名对应的 IP。&lt;/li>
&lt;li>&lt;code>local dns server&lt;/code> 从权威服务器得到域名对应的 IP。&lt;/li>
&lt;li>返还给 &lt;code>OS stub resovler&lt;/code>。递归查询结束。&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>Systems normally lookup any name (including domain names) using the hosts file first (if present), followed by DNS.
However, the nsswitch.conf file (typically in /etc) controls this order (normally hosts: file dns), allowing the order to be changed or the file value to be deleted entirely depending on local needs.&lt;/p>
&lt;/blockquote>
&lt;h3>有没有其他解决方案&lt;span class="hx-absolute -hx-mt-20" id="有没有其他解决方案">&lt;/span>
&lt;a href="#%e6%9c%89%e6%b2%a1%e6%9c%89%e5%85%b6%e4%bb%96%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h2>dig 命令&lt;span class="hx-absolute -hx-mt-20" id="dig-命令">&lt;/span>
&lt;a href="#dig-%e5%91%bd%e4%bb%a4" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>dig domainname&lt;span class="hx-absolute -hx-mt-20" id="dig-domainname">&lt;/span>
&lt;a href="#dig-domainname" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;pre>&lt;code> ~ dig github.com
; &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.6 &amp;lt;&amp;lt;&amp;gt;&amp;gt; github.com
;; global options: &amp;#43;cmd
;; Got answer:
;; -&amp;gt;&amp;gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 23033
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0
;; QUESTION SECTION:
;github.com. IN A
;; ANSWER SECTION:
github.com. 17 IN A 52.74.223.119 # github.com. 这个域名对应的一个 ip
;; Query time: 14 msec
;; SERVER: 61.139.2.69#53(61.139.2.69)
;; WHEN: Thu Apr 23 19:53:17 CST 2020
;; MSG SIZE rcvd: 44&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>wireshark 抓包验证实际的网络架构&lt;span class="hx-absolute -hx-mt-20" id="wireshark-抓包验证实际的网络架构">&lt;/span>
&lt;a href="#wireshark-%e6%8a%93%e5%8c%85%e9%aa%8c%e8%af%81%e5%ae%9e%e9%99%85%e7%9a%84%e7%bd%91%e7%bb%9c%e6%9e%b6%e6%9e%84" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h4>TCP/IP stack&lt;span class="hx-absolute -hx-mt-20" id="tcpip-stack">&lt;/span>
&lt;a href="#tcpip-stack" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h4>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/tcp-ip-stack-dns.png" alt="tcp-ip-stack" loading="lazy" />&lt;/p>
&lt;h3>dig +trace domainname&lt;span class="hx-absolute -hx-mt-20" id="dig-trace-domainname">&lt;/span>
&lt;a href="#dig-trace-domainname" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~ dig +trace github.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;&lt;/span> &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.6 &amp;lt;&amp;lt;&amp;gt;&amp;gt; +trace github.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> global options: +cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS k.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS e.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS b.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS a.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS m.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS l.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS d.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS f.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS g.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS h.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS j.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS c.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">. &lt;span class="m">81219&lt;/span> IN NS i.root-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> Received &lt;span class="m">228&lt;/span> bytes from 61.139.2.69#53&lt;span class="o">(&lt;/span>61.139.2.69&lt;span class="o">)&lt;/span> in &lt;span class="m">15&lt;/span> ms &lt;span class="c1">#local dns server，本地 DNS 拥有完整的 root server ip 列表。内置到本地 DNS 服务器。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS l.gtld-servers.net. &lt;span class="c1"># 记录 com. 这个顶级域名的服务器，generic top level domain server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS b.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS c.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS d.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS e.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS f.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS g.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS a.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS h.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS i.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS j.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS k.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">172800&lt;/span> IN NS m.gtld-servers.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">86400&lt;/span> IN DS &lt;span class="m">30909&lt;/span> &lt;span class="m">8&lt;/span> &lt;span class="m">2&lt;/span> E2D3C916F6DEEAC73294E8268FB5885044A833FC5459588F4A9184CF C41A5766
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">com. &lt;span class="m">86400&lt;/span> IN RRSIG DS &lt;span class="m">8&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">86400&lt;/span> &lt;span class="m">20200506050000&lt;/span> &lt;span class="m">20200423040000&lt;/span> &lt;span class="m">48903&lt;/span> . Enqd4bffSJHlv8mqHcAptS9+fHo3cg6vCIQgrOZ3aBfx2nG4CjS27iEG 6u6NsPfcKVrz7RoU2xDtDMNJOcMBJdJe/lGNeo14N69SM0/MV2Z8wZBD HRPd2Y8Z1nyc7EnDbkFzuWV5G6vafaQa4KTQpG6jGOPIQpYESNiinxfy 0QQWUJELvjSOideCPqQcug2P2Pln7BzWiqFSg6I8d1h44349LsXcbr5W zJwZQJKLoDd0ysyGl5Bq3UZgfWYvTJFmmZ/OwKYT4QQ4BE0MtbVwae8X 9yI6d9jENsz+eebEEtxLt6o/LNQb3PdNhUH1PC1pxfHiEiNyYUcvbJdf &lt;span class="nv">Flgntg&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> Received &lt;span class="m">1170&lt;/span> bytes from 192.203.230.10#53&lt;span class="o">(&lt;/span>e.root-servers.net&lt;span class="o">)&lt;/span> in &lt;span class="m">211&lt;/span> ms &lt;span class="c1"># 从 e.root-servers.net 这个 root server 查询到的 TLD namesever，也就是存储 com. 这个顶级域名的服务器。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns1.p16.dynect.net. &lt;span class="c1"># 记录 github.com. 这个域名的权威服务器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns3.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns2.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns4.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns-520.awsdns-01.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns-421.awsdns-52.com.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns-1707.awsdns-21.co.uk.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">172800&lt;/span> IN NS ns-1283.awsdns-32.org.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CK0POJMG874LJREF7EFN8430QVIT8BSM.com. &lt;span class="m">86400&lt;/span> IN NSEC3 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> - CK0Q1GIN43N1ARRC9OSM6QPQR81H5M9A NS SOA RRSIG DNSKEY NSEC3PARAM
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CK0POJMG874LJREF7EFN8430QVIT8BSM.com. &lt;span class="m">86400&lt;/span> IN RRSIG NSEC3 &lt;span class="m">8&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">86400&lt;/span> &lt;span class="m">20200427045033&lt;/span> &lt;span class="m">20200420034033&lt;/span> &lt;span class="m">39844&lt;/span> com. BDAWMm4AsSRfrBwOXhNN8ihw++J2UkhEk8A6LeSIz1llDs5kt0CcOqTM OK1txlQNr3N0k1RTBW/hkEZ1mxjIHF2GARt/hpO43ILPBVs/vhKAKCKh A96XJG+NzN0t/heB6mFNASKAcmVdfT5a0tVkmmzhGktDp5ECdZAIFRhZ &lt;span class="nv">8y6jxsUhGP7ZiN1AfFBi1cWeSth5FW4Btpy9RffVKg5lIA&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4KB4DFS71LEP8G8P8VT4CCUSQNL4CNCS.com. &lt;span class="m">86400&lt;/span> IN NSEC3 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> - 4KB4PTQQ5CTA7POCTGM7RUFC8B1RKTEU NS DS RRSIG
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4KB4DFS71LEP8G8P8VT4CCUSQNL4CNCS.com. &lt;span class="m">86400&lt;/span> IN RRSIG NSEC3 &lt;span class="m">8&lt;/span> &lt;span class="m">2&lt;/span> &lt;span class="m">86400&lt;/span> &lt;span class="m">20200428061912&lt;/span> &lt;span class="m">20200421050912&lt;/span> &lt;span class="m">39844&lt;/span> com. PFN1p6XvR4SmD4ucRULmtYIMQkFf/ZrdEWz6bRVtcepYF6QwTC/VOVYM 7PV0tuTTdr1LqkUwQJ7mv23vtKnjFba2Cf7pBOTz9JuCHUC0Qml9cOc6 Cwjhx7haj6h0VEzS+oIY7l2p/af/B36iQCXASVN3Y6s/i+66iXIg905z GqFnAKOgR0R4KJx5KwHIzBkgxr/I/SyCd+HNw+2fr15X0w&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> Received &lt;span class="m">824&lt;/span> bytes from 192.26.92.30#53&lt;span class="o">(&lt;/span>c.gtld-servers.net&lt;span class="o">)&lt;/span> in &lt;span class="m">173&lt;/span> ms &lt;span class="c1"># 从 c.gtld-servers.net 这个 TLD nameserver 查询到存储 github.com. 这个域名的权威服务器。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">60&lt;/span> IN A 13.250.177.223 &lt;span class="c1"># 得到了 github.com. 这个域名的一个 ip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns-1707.awsdns-21.co.uk.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns3.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns2.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns-1283.awsdns-32.org.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns-421.awsdns-52.com.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns-520.awsdns-01.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns4.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com. &lt;span class="m">900&lt;/span> IN NS ns1.p16.dynect.net.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> Received &lt;span class="m">275&lt;/span> bytes from 204.13.250.16#53&lt;span class="o">(&lt;/span>ns2.p16.dynect.net&lt;span class="o">)&lt;/span> in &lt;span class="m">198&lt;/span> ms 从 ns2.p16.dynect.net 这个权威服务器查询到的 github.com. 的 ip 是 13.250.177.223。至此，得到域名对应的 ip。&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>DNS 记录类型&lt;span class="hx-absolute -hx-mt-20" id="dns-记录类型">&lt;/span>
&lt;a href="#dns-%e8%ae%b0%e5%bd%95%e7%b1%bb%e5%9e%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>CNAME&lt;span class="hx-absolute -hx-mt-20" id="cname">&lt;/span>
&lt;a href="#cname" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;code>Canonical Name&lt;/code> 域名指向另一个域名。见下图：&lt;/p>
&lt;div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> dig -t cname music.163.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;&lt;/span> &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.6 &amp;lt;&amp;lt;&amp;gt;&amp;gt; -t cname music.163.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> global options: +cmd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> Got answer:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> -&amp;gt;&amp;gt;HEADER&lt;span class="s">&amp;lt;&amp;lt;- opco&lt;/span>de: QUERY, status: NOERROR, id: &lt;span class="m">12400&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> flags: qr aa rd ra&lt;span class="p">;&lt;/span> QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> QUESTION SECTION:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;&lt;/span>music.163.com. IN CNAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> ANSWER SECTION:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">music.163.com. 1 IN CNAME music.ntes53.netease.com.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> Query time: &lt;span class="m">0&lt;/span> msec
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> SERVER: 198.18.0.2#53&lt;span class="o">(&lt;/span>198.18.0.2&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> WHEN: Fri Oct &lt;span class="m">06&lt;/span> 11:41:17 CST &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">;;&lt;/span> MSG SIZE rcvd: &lt;span class="m">82&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>A&lt;span class="hx-absolute -hx-mt-20" id="a">&lt;/span>
&lt;a href="#a" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;code>address&lt;/code> ip address&lt;/p>
&lt;h3>NS&lt;span class="hx-absolute -hx-mt-20" id="ns">&lt;/span>
&lt;a href="#ns" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;code>name server&lt;/code> 保存下一级域名的服务器，只设置成域名。&lt;/p>
&lt;h3>PTR&lt;span class="hx-absolute -hx-mt-20" id="ptr">&lt;/span>
&lt;a href="#ptr" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;code>pointer record&lt;/code>，根据 ip 查询域名。类似 ARP，用 ip 找 MAC 地址。&lt;/p>
&lt;h3>MX&lt;span class="hx-absolute -hx-mt-20" id="mx">&lt;/span>
&lt;a href="#mx" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>mail exchange 电子邮件服务器&lt;/p>
&lt;h3>TXT&lt;span class="hx-absolute -hx-mt-20" id="txt">&lt;/span>
&lt;a href="#txt" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;a href="https://allagora.wordpress.com/2022/03/22/use-dns-txt-lookup-to-gain-quick-insights-which-services-companies-are-using/" target="_blank" rel="noopener">可以获取这个网站在使用那些第三方服务&lt;/a>&lt;/p>
&lt;h2>Reference&lt;span class="hx-absolute -hx-mt-20" id="reference">&lt;/span>
&lt;a href="#reference" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ol>
&lt;li>&lt;a href="https://www.ruanyifeng.com/blog/2016/06/dns.html" target="_blank" rel="noopener">DNS 入门&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://kilyos.ee.bilkent.edu.tr/~ee538/lecture1.pdf" target="_blank" rel="noopener">Introduction and Layered Network Architecture&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.iana.org/domains/root/servers" target="_blank" rel="noopener">root servers ips&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://root-servers.org/" target="_blank" rel="noopener">all-root-servers&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tools.ietf.org/html/rfc2929" target="_blank" rel="noopener">rfc-dns&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.cloudflare.com/learning/dns/dns-server-types/" target="_blank" rel="noopener">dns-server-types&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.cloudflare.com/learning/dns/what-is-dns/" target="_blank" rel="noopener">what is dns&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.cloudflare.com/learning/dns/what-is-recursive-dns/" target="_blank" rel="noopener">what is recursive dns&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://simpledns.plus/help/dns-record-types" target="_blank" rel="noopener">dns record types&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.cs.cmu.edu/~pattis/15-1XX/common/handouts/ascii.html" target="_blank" rel="noopener">ascii&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.cloudflare.com/learning/dns/glossary/dns-zone/" target="_blank" rel="noopener">dns-zone&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://bind9.readthedocs.io/en/v9.18.21/chapter3.html#localhost-zone-file" target="_blank" rel="noopener">zone-file&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://viewdns.info/" target="_blank" rel="noopener">viewdns&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://allagora.wordpress.com/2022/03/22/use-dns-txt-lookup-to-gain-quick-insights-which-services-companies-are-using/" target="_blank" rel="noopener">dns record txt&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.nslookup.io/" target="_blank" rel="noopener">https://www.nslookup.io/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://whois.gandi.net/zh-hans" target="_blank" rel="noopener">域名信息查询&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.dnsperf.com/" target="_blank" rel="noopener">dns延迟测试&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://messwithdns.net/" target="_blank" rel="noopener">dns实践&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/ogham/dog" target="_blank" rel="noopener">dns-client-dog&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/mr-karan/doggo" target="_blank" rel="noopener">dns-client-doggo&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://dnsspeedtest.online/" target="_blank" rel="noopener">dns速度测试&lt;/a>&lt;/li>
&lt;/ol></description></item><item><title>wireshark</title><link>https://cloudedseal.github.io/blog/wireshark/</link><pubDate>Tue, 10 Sep 2019 09:51:07 +0800</pubDate><guid>https://cloudedseal.github.io/blog/wireshark/</guid><description>
&lt;h2>Wireshark Windows 配置 SSL&lt;span class="hx-absolute -hx-mt-20" id="wireshark-windows-配置-ssl">&lt;/span>
&lt;a href="#wireshark-windows-%e9%85%8d%e7%bd%ae-ssl" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;blockquote>
&lt;p>Version 3.0.3&lt;/p>
&lt;/blockquote>
&lt;h3>配置 SSLKEYLOGFILE 系统变量&lt;span class="hx-absolute -hx-mt-20" id="配置-sslkeylogfile-系统变量">&lt;/span>
&lt;a href="#%e9%85%8d%e7%bd%ae-sslkeylogfile-%e7%b3%bb%e7%bb%9f%e5%8f%98%e9%87%8f" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/SSLKEYLOGFILE.png" alt="系统变量 SSLKEYLOGFILE" loading="lazy" />&lt;/p>
&lt;h3>配置 Wireshark&lt;span class="hx-absolute -hx-mt-20" id="配置-wireshark">&lt;/span>
&lt;a href="#%e9%85%8d%e7%bd%ae-wireshark" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;blockquote>
&lt;p>编辑 -&amp;gt; 首选项 -&amp;gt; Protocols -&amp;gt; TLS
&lt;img src="https://github.com/stardustman/pictures/raw/main/img/wireshark_tls_logfile.png" alt="Wireshark 配置 TLS logfile" loading="lazy" />&lt;/p>
&lt;/blockquote>
&lt;h3>重启 Wireshark&lt;span class="hx-absolute -hx-mt-20" id="重启-wireshark">&lt;/span>
&lt;a href="#%e9%87%8d%e5%90%af-wireshark" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;h2>过滤器查看&lt;span class="hx-absolute -hx-mt-20" id="过滤器查看">&lt;/span>
&lt;a href="#%e8%bf%87%e6%bb%a4%e5%99%a8%e6%9f%a5%e7%9c%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;blockquote>
&lt;p>视图 -&amp;gt; 内部 -&amp;gt; 支持的协议&lt;/p>
&lt;/blockquote></description></item><item><title>master-ip</title><link>https://cloudedseal.github.io/blog/master-ip/</link><pubDate>Tue, 04 Jun 2019 15:32:28 +0800</pubDate><guid>https://cloudedseal.github.io/blog/master-ip/</guid><description>
&lt;h1>Motivation&lt;/h1>&lt;p>The Internet Protocol is designed for use in interconnected systems of &lt;strong>packet-switched&lt;/strong> computer communication networks. Such a system has been called a &amp;ldquo;catenet&amp;rdquo;. The internet protocol provides for transmitting blocks of data called datagrams from sources to destinations, where sources and destinations are hosts identified by &lt;strong>fixed length addresses&lt;/strong>. The internet protocol also provides for &lt;strong>fragmentation&lt;/strong> and &lt;strong>reassembly&lt;/strong> of long datagrams, if necessary, for transmission through &amp;ldquo;small packet&amp;rdquo; networks.&lt;/p>
&lt;blockquote>
&lt;p>IPv4 is a connectionless protocol for use on packet-switched networks. It operates on a best effort delivery model, in that it does not guarantee delivery, nor does it assure proper sequencing or avoidance of duplicate delivery. These aspects, including data integrity, are addressed by an upper layer transport protocol, such as the Transmission Control Protocol (TCP).&lt;/p>
&lt;/blockquote>
&lt;h1>IP header format&lt;/h1>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/ip-header-format.png" alt="ip-header-format" loading="lazy" />&lt;/p>
&lt;h1>Ip datagram&lt;/h1>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/ip-format.png" alt="ip-format" loading="lazy" />&lt;/p>
&lt;h1>IPV4 example&lt;/h1>&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/ip-capture-wireshark.jpg" alt="ip-capture-wireshark" loading="lazy" />&lt;/p>
&lt;p>&lt;img src="https://github.com/stardustman/pictures/raw/main/img/ip-capture-wireshark-example.png" alt="ip-capture-wireshark-example" loading="lazy" />&lt;/p>
&lt;h2>version(4 bits)&lt;span class="hx-absolute -hx-mt-20" id="version4-bits">&lt;/span>
&lt;a href="#version4-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x4(4)&lt;/p>
&lt;h2>Header Length(4 bits)&lt;span class="hx-absolute -hx-mt-20" id="header-length4-bits">&lt;/span>
&lt;a href="#header-length4-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x5(5)&lt;/p>
&lt;h2>Type Of Service(TOS)(8 bits)&lt;span class="hx-absolute -hx-mt-20" id="type-of-servicetos8-bits">&lt;/span>
&lt;a href="#type-of-servicetos8-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x00(0)&lt;/p>
&lt;h2>Total Length(16 bits)&lt;span class="hx-absolute -hx-mt-20" id="total-length16-bits">&lt;/span>
&lt;a href="#total-length16-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x28(40)&lt;/p>
&lt;h2>Identification(16 bits)&lt;span class="hx-absolute -hx-mt-20" id="identification16-bits">&lt;/span>
&lt;a href="#identification16-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0xd279&lt;/p>
&lt;h2>Flags(3 bits)&lt;span class="hx-absolute -hx-mt-20" id="flags3-bits">&lt;/span>
&lt;a href="#flags3-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x4 0100&lt;/p>
&lt;ol>
&lt;li>0 Reserved bit not set&lt;/li>
&lt;li>1 Don&amp;rsquo;t fragment set&lt;/li>
&lt;li>0 More fragments not set&lt;/li>
&lt;/ol>
&lt;h2>Fragment Offset(13 bits)&lt;span class="hx-absolute -hx-mt-20" id="fragment-offset13-bits">&lt;/span>
&lt;a href="#fragment-offset13-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;blockquote>
&lt;p>This field indicates where in the datagram this fragment belongs.
The fragment offset is measured in units of 8 octets (64 bits). The
first fragment has offset zero.&lt;/p>
&lt;/blockquote>
&lt;p>0x000 (0000 0000 0000)&lt;/p>
&lt;h2>Time to Live(TTL)(8 bits)&lt;span class="hx-absolute -hx-mt-20" id="time-to-livettl8-bits">&lt;/span>
&lt;a href="#time-to-livettl8-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x80 TTL:(128)&lt;/p>
&lt;h2>Protocal(8 bits)&lt;span class="hx-absolute -hx-mt-20" id="protocal8-bits">&lt;/span>
&lt;a href="#protocal8-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x06 TCP:(6)&lt;/p>
&lt;h2>Header Checksum(16 bits)&lt;span class="hx-absolute -hx-mt-20" id="header-checksum16-bits">&lt;/span>
&lt;a href="#header-checksum16-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x2e35&lt;/p>
&lt;h2>Source IP Address(32 bits)&lt;span class="hx-absolute -hx-mt-20" id="source-ip-address32-bits">&lt;/span>
&lt;a href="#source-ip-address32-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x 0a:fe:c9:ad -&amp;gt; 10.254.201.173&lt;/p>
&lt;h2>Destination IP Address(32 bits)&lt;span class="hx-absolute -hx-mt-20" id="destination-ip-address32-bits">&lt;/span>
&lt;a href="#destination-ip-address32-bits" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>0x ac:10:79:65 -&amp;gt; 172.16.121.101&lt;/p>
&lt;h1>References&lt;/h1>&lt;ol>
&lt;li>&lt;a href="http://user.it.uu.se/~rmg/teaching/IP.pdf" target="_blank" rel="noopener">ip fragmentation and reassembly&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://en.m.wikipedia.org/wiki/IPv4#Fragmentation_and_reassembly" target="_blank" rel="noopener">fragmentation &amp;amp; reassembly&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://mp.weixin.qq.com/s/ifZk5Ox9cnixq1ZxgwFBSw" target="_blank" rel="noopener">ip 重组&lt;/a>&lt;/li>
&lt;/ol></description></item></channel></rss>